CONFIG_LOCALVERSION="-dev"
CONFIG_EXPERT=y
CONFIG_STRICT_DEVMEM=n
CONFIG_PRINTK_TIME=y
CONFIG_MAGIC_SYSRQ=y
CONFIG_MAGIC_SYSRQ_DEFAULT_ENABLE=0x1
CONFIG_DEBUG_KERNEL=y
CONFIG_FRAME_POINTER=y
CONFIG_STACKTRACE=y
CONFIG_KALLSYMS=y
CONFIG_KALLSYMS_ALL=y
CONFIG_DEBUG_FS=y
CONFIG_DYNAMIC_DEBUG=y
CONFIG_DEBUG_INFO=y
CONFIG_DEBUG_INFO_DWARF5=y
CONFIG_DEBUG_INFO_BTF=y
CONFIG_DEBUG_INFO_BTF_MODULES=y
CONFIG_GDB_SCRIPTS=y
CONFIG_DEBUG_OBJECTS=y
CONFIG_DEBUG_VM=y
CONFIG_DEBUG_SPINLOCK=y
CONFIG_DEBUG_ATOMIC_SLEEP=y
CONFIG_PROVE_LOCKING=y
CONFIG_DEBUG_MUTEXES=y
CONFIG_LOCK_STAT=y
CONFIG_PANIC_ON_OOPS=y
CONFIG_PANIC_TIMEOUT=5
CONFIG_STACKDEPOT=y
CONFIG_DEBUG_PAGEALLOC=y
CONFIG_PAGE_POISONING=y
CONFIG_PAGE_POISONING_NO_SANITY=y
CONFIG_PAGE_POISONING_ZERO=y
CONFIG_DEBUG_MEMORY_INIT=y
CONFIG_PAGE_OWNER=y
CONFIG_PAGE_EXTENSION=y
CONFIG_SLUB_DEBUG=y
CONFIG_PROVE_RCU=y

# KGDB / KDB
CONFIG_KGDB=y
CONFIG_KGDB_SERIAL_CONSOLE=y
CONFIG_KDB=y
CONFIG_KDB_DEFAULT_ENABLE=0x1

# Early console
CONFIG_SERIAL_8250=y
CONFIG_SERIAL_8250_CONSOLE=y
CONFIG_SERIAL_EARLYCON=y
CONFIG_EARLY_PRINTK=y
CONFIG_EARLY_PRINTK_DBGP=y
CONFIG_EARLY_PRINTK_USB=y

# Modules
CONFIG_MODULES=y
CONFIG_MODULE_UNLOAD=y
CONFIG_MODULE_FORCE_UNLOAD=y
CONFIG_MODVERSIONS=y
CONFIG_MODULE_SRCVERSION_ALL=y
CONFIG_DEBUG_MODULES=y

# Initrd
CONFIG_BLK_DEV_INITRD=y

# Filesystems
CONFIG_EXT4_FS=y
CONFIG_TMPFS=y
CONFIG_DEVTMPFS=y
CONFIG_DEVTMPFS_MOUNT=y

# PCIe / I/O
CONFIG_PCI=y
CONFIG_PCI_MSI=y
CONFIG_PCIEPORTBUS=y
CONFIG_PCIEAER=y
CONFIG_PCIE_ECRC=y
CONFIG_PCIE_DPC=y
CONFIG_PCIE_PME=y
CONFIG_PCIEASPM=y
CONFIG_PCIEASPM_DEBUG=y
CONFIG_PCIE_BUS_PEER2PEER=y
CONFIG_PCI_IOV=y
CONFIG_PCI_PRI=y
CONFIG_PCI_PASID=y
CONFIG_PCI_DEBUG=y
CONFIG_PCI_STUB=y
CONFIG_PCI_REALLOC_ENABLE_AUTO=y
CONFIG_PCI_ENDPOINT=y
CONFIG_PCI_ENDPOINT_CONFIGFS=y
CONFIG_PCI_ENDPOINT_TEST=y
CONFIG_PCI_EPF_TEST=y
CONFIG_HOTPLUG_PCI=y
CONFIG_HOTPLUG_PCI_PCIE=y
CONFIG_PCI_HOTPLUG=y

# DMA / IOMMU
CONFIG_DMA_API_DEBUG=y
CONFIG_DEBUG_DMA_API=y
CONFIG_DMADEVICES=y
CONFIG_DMA_ENGINE=y
CONFIG_DMA_CMA=y
CONFIG_CMA_DEBUG=y
CONFIG_IOMMU_SUPPORT=y
CONFIG_IOMMU_DEFAULT_PASSTHROUGH=y
CONFIG_IOMMU_DEBUGFS=y
CONFIG_SWIOTLB=y
CONFIG_SWIOTLB_DYNAMIC=y

# Networking
CONFIG_NET=y
CONFIG_INET=y
CONFIG_PACKET=y
CONFIG_UNIX=y
CONFIG_NETFILTER=y
CONFIG_NET_SCHED=y
CONFIG_NET_CLS_BASIC=y
CONFIG_NET_CLS_U32=y
CONFIG_NET_CLS_ACT=y
CONFIG_NET_DEVLINK=y
CONFIG_NET_RX_BUSY_POLL=y
CONFIG_NET_POLL_CONTROLLER=y
CONFIG_NET_DEV_STATS=y
CONFIG_NET_NS=y
CONFIG_NET_DROP_MONITOR=y
CONFIG_NET_SELFTESTS=y
CONFIG_NET_PKTGEN=y
CONFIG_NET_TCPPROBE=y
CONFIG_NETFILTER_XT_TARGET_LOG=y
CONFIG_NETFILTER_XT_MATCH_CONNTRACK=y
CONFIG_TCP_CONG_BBR=y
CONFIG_TUN=y
CONFIG_VETH=y
CONFIG_VIRTIO_NET=y
CONFIG_E1000E=y
CONFIG_BRIDGE=y
CONFIG_VLAN_8021Q=y
CONFIG_BONDING=y
CONFIG_MACVLAN=y
CONFIG_DUMMY=y
CONFIG_IFB=y
CONFIG_NETCONSOLE=y
CONFIG_NETPOLL_TRAP=y
CONFIG_NETPOLL=y
CONFIG_NET_SOCK_MSG=y

# Virtio
CONFIG_VIRTIO=y
CONFIG_VIRTIO_PCI=y
CONFIG_VIRTIO_MMIO=y
CONFIG_VIRTIO_BLK=y
CONFIG_VIRTIO_CONSOLE=y
CONFIG_VIRTIO_INPUT=y
CONFIG_VIRTIO_BALLOON=y
CONFIG_VHOST_NET=y
CONFIG_VHOST_VSOCK=y
CONFIG_VHOST=y

# Block devices
CONFIG_BLK_DEV_LOOP=y
CONFIG_BLK_DEV_RAM=y
CONFIG_BLK_DEV_RAM_SIZE=65536
CONFIG_BLK_DEV_NULL_BLK=y
CONFIG_BLK_DEV_NVME=y
CONFIG_BLK_DEV_SD=y
CONFIG_BLK_DEBUG_FS=y
CONFIG_BLK_DEV_IO_TRACE=y

# Sound / ALSA / USB
CONFIG_SOUND=y
CONFIG_SND=y
CONFIG_SND_PROC_FS=y
CONFIG_SND_DYNAMIC_MINORS=y
CONFIG_SND_HRTIMER=y
CONFIG_SND_SEQ=y
CONFIG_SND_SEQ_DUMMY=y
CONFIG_SND_DEBUG=y
CONFIG_SND_DEBUG_VERBOSE=y
CONFIG_SND_PCM_XRUN_DEBUG=y
CONFIG_SND_USB=y
# so the driver doesnt attach
CONFIG_SND_USB_AUDIO=n
CONFIG_SND_PCM_TIMER=y
CONFIG_SOUND_PRIME=y

# USB core
CONFIG_USB=y
CONFIG_USB_XHCI_HCD=y
CONFIG_USB_EHCI_HCD=y
CONFIG_USB_OHCI_HCD=y
CONFIG_USB_ACM=y
CONFIG_USB_PRINTER=y
CONFIG_USB_MON=y
CONFIG_USB_HID=y
CONFIG_HIDRAW=y
CONFIG_INPUT_EVDEV=y

# USB Gadget
CONFIG_USB_GADGET=y
CONFIG_USB_LIBCOMPOSITE=y
CONFIG_USB_CONFIGFS=y
CONFIG_USB_CONFIGFS_ECM=y
CONFIG_USB_DUMMY_HCD=y
CONFIG_USB_USBNET=y
CONFIG_USB_NET_CDCETHER=y
# Serial gadget
CONFIG_USB_G_SERIAL=y
CONFIG_USB_F_ACM=y
CONFIG_USB_U_SERIAL=y

# Tracing / Perf / Ftrace / BPF
CONFIG_TRACING=y
CONFIG_TRACEPOINTS=y
CONFIG_FTRACE=y
CONFIG_FUNCTION_TRACER=y
CONFIG_FUNCTION_GRAPH_TRACER=y
CONFIG_STACK_TRACER=y
CONFIG_EVENT_TRACING=y
CONFIG_KPROBES=y
CONFIG_KPROBE_EVENTS=y
CONFIG_UPROBES=y
CONFIG_DYNAMIC_EVENTS=y
CONFIG_PROBE_EVENTS_BTF_ARGS=y
CONFIG_PERF_EVENTS=y
CONFIG_BPF=y
CONFIG_BPF_SYSCALL=y
CONFIG_BPF_JIT=y
CONFIG_BPF_EVENTS=y
CONFIG_BPF_LSM=y

# Memory debugging
CONFIG_PAGE_POISONING=y
CONFIG_PAGE_OWNER=y
CONFIG_DEBUG_PAGEALLOC=y
CONFIG_DEBUG_MEMORY_INIT=y
CONFIG_PAGE_POISONING_ZERO=y
CONFIG_MEMCG=y
CONFIG_MEMCG_DEBUG=y

# Debug / QoL
CONFIG_PRINTK_CALLER=y
CONFIG_BOOT_PRINTK_DELAY=y
CONFIG_PSTORE=y
CONFIG_PSTORE_RAM=y
CONFIG_PSTORE_CONSOLE=y
CONFIG_PSTORE_PMSG=y
CONFIG_PSTORE_FTRACE=y
CONFIG_BOOTPARAM_HUNG_TASK_PANIC=y
CONFIG_BOOTPARAM_SOFTLOCKUP_PANIC=y

# Misc dev helpers
CONFIG_IKCONFIG=y
CONFIG_IKCONFIG_PROC=y
CONFIG_PROFILING=y
CONFIG_FUNCTION_PROFILER=y
CONFIG_LOCKUP_DETECTOR=y
CONFIG_HARDLOCKUP_DETECTOR=y
CONFIG_SOFTLOCKUP_DETECTOR=y

# Default arch
CONFIG_X86_64=y

# systemd / namespaces / cgroups
CONFIG_PROC_FS=y
CONFIG_SYSFS=y
CONFIG_TMPFS_POSIX_ACL=y
CONFIG_TMPFS_XATTR=y
CONFIG_DEVPTS_MULTIPLE_INSTANCES=y
CONFIG_FHANDLE=y
CONFIG_NAMESPACES=y
CONFIG_UTS_NS=y
CONFIG_IPC_NS=y
CONFIG_USER_NS=y
CONFIG_PID_NS=y
CONFIG_CGROUPS=y
CONFIG_CGROUP_BPF=y
CONFIG_CGROUP_SCHED=y
CONFIG_CGROUP_PIDS=y
CONFIG_CGROUP_FREEZER=y
CONFIG_CGROUP_DEVICE=y
CONFIG_CGROUP_CPUACCT=y
CONFIG_CGROUP_PERF=y
CONFIG_BLK_CGROUP=y
CONFIG_CGROUP_WRITEBACK=y
CONFIG_CGROUP2_FS=y

# Autofs / syscalls
CONFIG_AUTOFS_FS=y
CONFIG_SECCOMP=y
CONFIG_SECCOMP_FILTER=y
CONFIG_EPOLL=y
CONFIG_SIGNALFD=y
CONFIG_TIMERFD=y
CONFIG_EVENTFD=y
CONFIG_INOTIFY_USER=y
CONFIG_FANOTIFY=y
CONFIG_SYSFS_SYSCALL=y

# --- Filesystems for /boot/efi ---
CONFIG_FAT_FS=y
CONFIG_VFAT_FS=y
CONFIG_MSDOS_FS=y

# NLS dependencies used by vfat
CONFIG_NLS=y
CONFIG_NLS_CODEPAGE_437=y
CONFIG_NLS_ISO8859_1=y
CONFIG_FAT_DEFAULT_CODEPAGE=437
CONFIG_FAT_DEFAULT_IOCHARSET="iso8859-1"

# --- Partition tables (ESP) ---
CONFIG_PARTITION_ADVANCED=y
CONFIG_EFI_PARTITION=y

# Virtio network
CONFIG_VIRTIO_NET=y
CONFIG_VIRTIO_PCI=y
CONFIG_VIRTIO=y

# Intel e1000 / 82574L
CONFIG_E1000E=y
CONFIG_E1000=y

# Core network bits (should already be set)
CONFIG_NETDEVICES=y
CONFIG_ETHERNET=y
CONFIG_NET_CORE=y
# required
CONFIG_SND_HDA=y
CONFIG_SND_HDA_INTEL=y

# helpers/codecs that make QEMU HDA “just work”
CONFIG_SND_HDA_GENERIC=y
CONFIG_SND_HDA_CODEC_GENERIC=y
CONFIG_SND_HDA_CODEC_HDMI=y
CONFIG_SND_HDA_CODEC_REALTEK=y     # optional, but harmless
CONFIG_SND_HDA_EXT_CORE=y          # gets pulled in normally